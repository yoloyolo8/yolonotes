<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=content-type content="text/html"><meta name=viewport content="width=device-width,initial-scale=1"><title itemprop=name>测试：obsidian使用shell command发布hugo blog |</title><meta property="og:title" content="测试：obsidian使用shell command发布hugo blog | "><meta name=twitter:title content="测试：obsidian使用shell command发布hugo blog | "><meta itemprop=name content="测试：obsidian使用shell command发布hugo blog | "><meta name=application-name content="测试：obsidian使用shell command发布hugo blog | "><meta property="og:site_name" content><meta name=description content><meta itemprop=description content><meta property="og:description" content><meta name=twitter:description content><meta property="og:locale" content="en"><meta name=language content="en"><link rel=alternate hreflang=en href=/posts/%E6%B5%8B%E8%AF%95obsidian%E4%BD%BF%E7%94%A8shell-command%E5%8F%91%E5%B8%83hugo-blog/ title><meta property="og:type" content="article"><meta property="og:article:published_time" content=0001-01-01T00:00:00Z><meta property="article:published_time" content=0001-01-01T00:00:00Z><meta property="og:url" content="/posts/%E6%B5%8B%E8%AF%95obsidian%E4%BD%BF%E7%94%A8shell-command%E5%8F%91%E5%B8%83hugo-blog/"><meta property="og:article:author" content="Yolo"><meta property="article:author" content="Yolo"><meta name=author content="Yolo"><script defer type=application/ld+json>{"@context":"http://schema.org","@type":"Article","headline":"测试：obsidian使用shell command发布hugo blog","author":{"@type":"Person","name":""},"datePublished":"0001-01-01","description":"","wordCount":702,"mainEntityOfPage":"True","dateModified":"0001-01-01","image":{"@type":"imageObject","url":""},"publisher":{"@type":"Organization","name":""}}</script><meta name=generator content="Hugo 0.151.0"><meta property="og:url" content="/posts/%E6%B5%8B%E8%AF%95obsidian%E4%BD%BF%E7%94%A8shell-command%E5%8F%91%E5%B8%83hugo-blog/"><meta property="og:title" content="测试：obsidian使用shell command发布hugo blog"><meta property="og:description" content="文科生用obsidian写md，然后特定扔到vscode里面的terminal去上传。离开了vscode开terminal就特别没有安全感。以前写脚本心里是有挑战和抗拒的，现在有了ai就好很多。ai赋能文科生。 Pasted imag
发布时显示 ===== Hugo 一键发布 ===== [13:45:22] 正在验证输入文件 当前文件: 我的文章.md [13:45:23] 请选择发布位置 1. 博客文章 (content/posts) 2. 关于页面 (content/about) 3. 自定义目录 X. 取消操作 您的选择 [1/2/3/X]: 1 [13:45:25] 准备发布到: D:\MyHugoSite\content\posts [13:45:25] 正在复制文件 原始位置: D:\ObsidianVault\笔记\我的文章.md 目标位置: D:\MyHugoSite\content\posts\我的文章.md ✅ 文件复制成功 [13:45:26] 执行 Git 操作 拉取远程更改... Already up to date. 添加更改到 Git... 创建提交: 发布: 我的文章.md => posts [main 1a2b3c4] 发布: 我的文章.md => posts 1 file changed, 10 insertions(+) 推送到远程仓库... Enumerating objects: 5, done. Counting objects: 100% (5/5), done. Writing objects: 100% (3/3), 745 bytes | 745.00 KiB/s, done. ✅ Git 操作成功完成 ✅ Vercel 将在60秒内开始部署 发布成功！Vercel 将在60秒内自动部署。 按任意键关闭窗口 (将在 5秒后自动关闭)... Shellpower.ps1"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta name=twitter:card content="summary"><meta name=twitter:title content="测试：obsidian使用shell command发布hugo blog"><meta name=twitter:description content="文科生用obsidian写md，然后特定扔到vscode里面的terminal去上传。离开了vscode开terminal就特别没有安全感。以前写脚本心里是有挑战和抗拒的，现在有了ai就好很多。ai赋能文科生。 Pasted imag
发布时显示 ===== Hugo 一键发布 ===== [13:45:22] 正在验证输入文件 当前文件: 我的文章.md [13:45:23] 请选择发布位置 1. 博客文章 (content/posts) 2. 关于页面 (content/about) 3. 自定义目录 X. 取消操作 您的选择 [1/2/3/X]: 1 [13:45:25] 准备发布到: D:\MyHugoSite\content\posts [13:45:25] 正在复制文件 原始位置: D:\ObsidianVault\笔记\我的文章.md 目标位置: D:\MyHugoSite\content\posts\我的文章.md ✅ 文件复制成功 [13:45:26] 执行 Git 操作 拉取远程更改... Already up to date. 添加更改到 Git... 创建提交: 发布: 我的文章.md => posts [main 1a2b3c4] 发布: 我的文章.md => posts 1 file changed, 10 insertions(+) 推送到远程仓库... Enumerating objects: 5, done. Counting objects: 100% (5/5), done. Writing objects: 100% (3/3), 745 bytes | 745.00 KiB/s, done. ✅ Git 操作成功完成 ✅ Vercel 将在60秒内开始部署 发布成功！Vercel 将在60秒内自动部署。 按任意键关闭窗口 (将在 5秒后自动关闭)... Shellpower.ps1"><link rel=canonical href=/posts/%E6%B5%8B%E8%AF%95obsidian%E4%BD%BF%E7%94%A8shell-command%E5%8F%91%E5%B8%83hugo-blog/><link href=/style.min.2d921c18cf1ec555ffc03d59a8adc211c402c68c930c27d6a0c306ab175a8d09.css rel=stylesheet><link href=/code-highlight.min.706d31975fec544a864cb7f0d847a73ea55ca1df91bf495fd12a177138d807cf.css rel=stylesheet><link rel=apple-touch-icon sizes=180x180 href=/icons/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/icons/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/icons/favicon-16x16.png><link rel=mask-icon href=/icons/safari-pinned-tab.svg><link rel="shortcut icon" href=/favicon.ico><link rel=manifest href=/site.webmanifest><meta name=msapplication-config content="/browserconfig.xml"><meta name=msapplication-TileColor content="#2d89ef"><meta name=theme-color content="#434648"><link rel=icon type=image/svg+xml href=/icons/favicon.svg></head><body data-theme class=notransition><script src=/js/theme.min.8961c317c5b88b953fe27525839672c9343f1058ab044696ca225656c8ba2ab0.js integrity="sha256-iWHDF8W4i5U/4nUlg5ZyyTQ/EFirBEaWyiJWVsi6KrA="></script><div class=navbar role=navigation><nav class=menu aria-label="Main Navigation"><a href=/ class=logo><svg width="25" height="25" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-home"><title/><path d="M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>
</a><input type=checkbox id=menu-trigger class=menu-trigger>
<label for=menu-trigger><span class=menu-icon><svg width="25" height="25" stroke="currentColor" fill="none" viewBox="0 0 14 14"><title>Menu</title><path stroke-linecap="round" stroke-linejoin="round" d="M10.595 7H3.40726"/><path stroke-linecap="round" stroke-linejoin="round" d="M10.5096 3.51488H3.49301"/><path stroke-linecap="round" stroke-linejoin="round" d="M10.5096 10.4851H3.49301"/><path stroke-linecap="round" stroke-linejoin="round" d="M.5 12.5V1.5c0-.552285.447715-1 1-1h11C13.0523.5 13.5.947715 13.5 1.5v11C13.5 13.0523 13.0523 13.5 12.5 13.5H1.5C.947715 13.5.5 13.0523.5 12.5z"/></svg></span></label><div class=trigger><ul class=trigger-container><li><a class=menu-link href=/>Home</a></li><li><a class="menu-link active" href=/posts/>Posts</a></li><li><a class=menu-link href=/pages/about/>About</a></li><li class=menu-separator><span>|</span></li></ul><a id=mode href=#><svg class="mode-sunny" width="21" height="21" viewBox="0 0 14 14" stroke-width="1"><title>LIGHT</title><g><circle cx="7" cy="7" r="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="7" y1=".5" x2="7" y2="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="2.4" y1="2.4" x2="3.82" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1=".5" y1="7" x2="2.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="2.4" y1="11.6" x2="3.82" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="7" y1="13.5" x2="7" y2="11.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="11.6" y1="11.6" x2="10.18" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="13.5" y1="7" x2="11.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="11.6" y1="2.4" x2="10.18" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"/></g></svg>
<svg class="mode-moon" width="21" height="21" viewBox="0 0 14 14" stroke-width="1"><title>DARK</title><g><circle cx="7" cy="7" r="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="7" y1=".5" x2="7" y2="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="2.4" y1="2.4" x2="3.82" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1=".5" y1="7" x2="2.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="2.4" y1="11.6" x2="3.82" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="7" y1="13.5" x2="7" y2="11.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="11.6" y1="11.6" x2="10.18" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="13.5" y1="7" x2="11.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="11.6" y1="2.4" x2="10.18" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"/></g></svg></a></div></nav></div><div class="wrapper post"><main class=page-content aria-label=Content><article><header class=header><h1 class=header-title>测试：obsidian使用shell command发布hugo blog</h1></header><details class=toc zgotmplz><summary><b></b></summary><nav id=TableOfContents><ul><li><a href=#发布时显示>发布时显示</a></li></ul></nav></details><div class=page-content><p>文科生用obsidian写md，然后特定扔到vscode里面的terminal去上传。离开了vscode开terminal就特别没有安全感。以前写脚本心里是有挑战和抗拒的，现在有了ai就好很多。ai赋能文科生。
Pasted imag</p><h2 id=发布时显示>发布时显示</h2><pre tabindex=0><code>===== Hugo 一键发布 =====

[13:45:22] 正在验证输入文件
当前文件: 我的文章.md

[13:45:23] 请选择发布位置
1. 博客文章 (content/posts)
2. 关于页面 (content/about)
3. 自定义目录
X. 取消操作

您的选择 [1/2/3/X]: 1

[13:45:25] 准备发布到: D:\MyHugoSite\content\posts

[13:45:25] 正在复制文件
原始位置: D:\ObsidianVault\笔记\我的文章.md
目标位置: D:\MyHugoSite\content\posts\我的文章.md
✅ 文件复制成功

[13:45:26] 执行 Git 操作
拉取远程更改...
Already up to date.
添加更改到 Git...
创建提交: 发布: 我的文章.md =&gt; posts
[main 1a2b3c4] 发布: 我的文章.md =&gt; posts
 1 file changed, 10 insertions(+)
推送到远程仓库...
Enumerating objects: 5, done.
Counting objects: 100% (5/5), done.
Writing objects: 100% (3/3), 745 bytes | 745.00 KiB/s, done.
✅ Git 操作成功完成
✅ Vercel 将在60秒内开始部署

发布成功！Vercel 将在60秒内自动部署。
按任意键关闭窗口 (将在 5秒后自动关闭)...
</code></pre><p>Shellpower.ps1</p><pre tabindex=0><code>param(
    [Parameter(Mandatory=$true)]
    [string]$filePath
)

# ====== 用户配置区域 ======
$HUGO_ROOT = &#34;D:\MyHugoSite&#34;           # Hugo 站点根目录
$HUGO_CONTENT = &#34;$HUGO_ROOT\content&#34;   # 内容目录
$DEFAULT_TARGET = &#34;posts&#34;              # 默认发布目录
$GIT_BRANCH = &#34;main&#34;                   # Git 分支名称
# =========================

function Write-Step($message) {
    Write-Host &#34;`n[$(Get-Date -Format &#39;HH:mm:ss&#39;)] $message&#34; -ForegroundColor Cyan
}

function Write-ErrorDetail($message) {
    Write-Host &#34;❌ 错误: $message&#34; -ForegroundColor Red
    $global:errorOccurred = $true
}

function Write-Success($message) {
    Write-Host &#34;✅ $message&#34; -ForegroundColor Green
}

function Show-ExitMessage($seconds = 5) {
    if ($global:errorOccurred) {
        Write-Host &#34;`n发布失败！请检查以上错误信息。&#34; -BackgroundColor DarkRed -ForegroundColor White
        $message = &#34;按任意键退出 (将在 {0}秒后自动关闭)...&#34; -f $seconds
    } else {
        Write-Host &#34;`n发布成功！Vercel 将在60秒内自动部署。&#34; -BackgroundColor DarkGreen -ForegroundColor White
        $message = &#34;按任意键关闭窗口 (将在 {0}秒后自动关闭)...&#34; -f $seconds
    }
    
    # 倒计时自动关闭
    $counter = $seconds
    while ($counter -gt 0) {
        Write-Host &#34;`r$message&#34; -NoNewline -ForegroundColor Yellow
        Start-Sleep 1
        $counter--
    }
}

# 初始化错误标志
$global:errorOccurred = $false

Write-Host &#34;`n===== Hugo 一键发布 =====`n&#34; -ForegroundColor Magenta
Write-Step &#34;正在验证输入文件&#34;
Write-Host &#34;当前文件: $([System.IO.Path]::GetFileName($filePath))&#34;

if (-not (Test-Path $filePath)) {
    Write-ErrorDetail &#34;文件不存在: $filePath&#34;
    Write-ErrorDetail &#34;可能原因: 文件被移动或已删除&#34;
    Show-ExitMessage
    exit 1
}

# 显示目录选择菜单
Write-Step &#34;请选择发布位置&#34;
Write-Host &#34;1. 博客文章 (content/posts)&#34;
Write-Host &#34;2. 关于页面 (content/about)&#34;
Write-Host &#34;3. 自定义目录&#34;
Write-Host &#34;X. 取消操作&#34;

$choice = Read-Host &#34;`n您的选择 [1/2/3/X]&#34;
$targetDir = &#34;&#34;

switch ($choice) {
    &#39;1&#39; { $targetDir = &#34;posts&#34; }
    &#39;2&#39; { $targetDir = &#34;about&#34; }
    &#39;3&#39; { 
        $targetDir = Read-Host &#34;`n请输入目录名称 (例如: &#39;projects&#39; 不要包含路径分隔符)&#34;
        
        # 验证自定义目录名称
        if ($targetDir -match &#39;[\\/:*?&#34;&lt;&gt;|]&#39;) {
            Write-ErrorDetail &#34;目录名称包含非法字符: $targetDir&#34;
            Write-ErrorDetail &#34;请使用字母、数字和下划线的组合&#34;
        }
    }
    &#39;X&#39; { 
        Write-Info &#34;操作已取消&#34;
        Show-ExitMessage 2
        exit
    }
    default { 
        $targetDir = $DEFAULT_TARGET
        Write-Host &#34;使用默认目录: $targetDir&#34; -ForegroundColor Yellow
    }
}

if ([string]::IsNullOrWhiteSpace($targetDir)) {
    Write-ErrorDetail &#34;未指定目标目录&#34;
    Show-ExitMessage
    exit 1
}

# 构建完整目标路径
$targetPath = Join-Path $HUGO_CONTENT $targetDir

Write-Step &#34;准备发布到: $targetPath&#34;

# 验证目标目录
if (-not (Test-Path $HUGO_CONTENT)) {
    Write-ErrorDetail &#34;找不到 Hugo 内容目录: $HUGO_CONTENT&#34;
    Write-ErrorDetail &#34;请检查脚本配置中的 `$HUGO_CONTENT` 变量&#34;
}
elseif (-not (Test-Path $targetPath) -and $choice -ne &#39;3&#39;) {
    Write-ErrorDetail &#34;目标目录不存在: $targetPath&#34;
    Write-ErrorDetail &#34;请检查 Hugo 内容目录结构&#34;
    
    $validDirs = Get-ChildItem $HUGO_CONTENT -Directory | Select-Object -ExpandProperty Name
    if ($validDirs) {
        Write-Host &#34;`n可用的内容目录:&#34; -ForegroundColor Yellow
        $validDirs -join &#34;, &#34;
    }
}
else {
    # 如果目录不存在但用户选择自定义，尝试创建
    if ($choice -eq &#39;3&#39; -and -not (Test-Path $targetPath)) {
        Write-Host &#34;创建新目录: $targetPath&#34; -ForegroundColor Blue
        try {
            New-Item -ItemType Directory -Path $targetPath -Force -ErrorAction Stop | Out-Null
            Write-Success &#34;目录创建成功&#34;
        }
        catch {
            Write-ErrorDetail &#34;无法创建目录: $_&#34;
            Write-ErrorDetail &#34;检查是否有足够的权限&#34;
        }
    }

    # 复制文件操作
    if (-not $errorOccurred) {
        $fileName = Split-Path $filePath -Leaf
        $destination = Join-Path $targetPath $fileName
        
        Write-Step &#34;正在复制文件&#34;
        Write-Host &#34;原始位置: $filePath&#34;
        Write-Host &#34;目标位置: $destination&#34;
        
        try {
            Copy-Item -Path $filePath -Destination $destination -Force -ErrorAction Stop
            Write-Success &#34;文件复制成功&#34;
        }
        catch {
            Write-ErrorDetail &#34;文件复制失败: $_&#34;
            Write-ErrorDetail &#34;可能原因: 目标路径无效或被其他进程占用&#34;
        }
    }
}

# Git 操作
if (-not $errorOccurred) {
    Write-Step &#34;执行 Git 操作&#34;
    
    try {
        Set-Location $HUGO_ROOT -ErrorAction Stop
        
        # 检查是否在 Git 仓库中
        $inGitRepo = git rev-parse --is-inside-work-tree 2&gt;$null
        if ($LASTEXITCODE -ne 0 -or $inGitRepo -ne &#34;true&#34;) {
            Write-ErrorDetail &#34;当前目录不是 Git 仓库: $HUGO_ROOT&#34;
            Write-ErrorDetail &#34;请使用 `git init` 初始化仓库&#34;
            Show-ExitMessage
            exit 1
        }
        
        Write-Host &#34;拉取远程更改...&#34; -ForegroundColor Cyan
        git pull origin $GIT_BRANCH 2&gt;&amp;1 | ForEach-Object { Write-Host $_ }
        
        if ($LASTEXITCODE -ne 0) {
            Write-ErrorDetail &#34;拉取远程更改失败 (代码: $LASTEXITCODE)&#34;
            Write-ErrorDetail &#34;解决方法: 手动解决冲突后重试&#34;
        }
        else {
            Write-Host &#34;添加更改到 Git...&#34; -ForegroundColor Cyan
            git add .
            
            $commitMsg = &#34;发布: $fileName =&gt; $targetDir&#34;
            Write-Host &#34;创建提交: $commitMsg&#34; -ForegroundColor Cyan
            git commit -m $commitMsg
            
            Write-Host &#34;推送到远程仓库...&#34; -ForegroundColor Cyan
            git push origin $GIT_BRANCH 2&gt;&amp;1 | ForEach-Object { Write-Host $_ }
            
            if ($LASTEXITCODE -eq 0) {
                Write-Success &#34;Git 操作成功完成&#34;
                Write-Success &#34;Vercel 将在60秒内开始部署&#34;
            }
            else {
                Write-ErrorDetail &#34;推送失败 (代码: $LASTEXITCODE)&#34;
                Write-ErrorDetail &#34;常见原因:&#34;
                Write-ErrorDetail &#34;1. 网络连接问题&#34;
                Write-ErrorDetail &#34;2. Git 凭证过期（运行: git credential-manager delete https://github.com）&#34;
                Write-ErrorDetail &#34;3. 远程仓库权限不足&#34;
            }
        }
    }
    catch {
        Write-ErrorDetail &#34;Git 操作失败: $_&#34;
        Write-ErrorDetail &#34;详细信息: $($_.Exception)&#34;
    }
}

# 显示退出信息
Show-ExitMessage
</code></pre><p>发生错误时</p><pre tabindex=0><code>&lt;TEXT&gt;

❌ 错误: 推送失败 (代码: 128)

❌ 错误: 常见原因:

❌ 错误: 1. 网络连接问题

❌ 错误: 2. Git 凭证过期(运行: git credential-manager delete https://github.com)

❌ 错误: 3. 远程仓库权限不足

发布失败！请检查以上错误信息。

按任意键退出 (将在 5秒后自动关闭)...
</code></pre><p>1</p></div></article></main></div><footer class=footer><span class=footer_item></span>&nbsp;<div class=footer_social-icons><a href=https://github.com/yoloyolo8 target=_blank rel="noopener noreferrer me" title=Github><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg>
</a><a href=https://twitter.com/0xyolo target=_blank rel="noopener noreferrer me" title=Twitter><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M23 3a10.9 10.9.0 01-3.14 1.53 4.48 4.48.0 00-7.86 3v1A10.66 10.66.0 013 4s-4 9 5 13a11.64 11.64.0 01-7 2c9 5 20 0 20-11.5a4.5 4.5.0 00-.08-.83A7.72 7.72.0 0023 3z"/></svg>
</a><a href=index.xml target=_blank rel="noopener noreferrer me" title=Rss><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 11a9 9 0 019 9"/><path d="M4 4a16 16 0 0116 16"/><circle cx="5" cy="19" r="1"/></svg></a></div><small class=footer_copyright>© 2025 Yolo.</small></footer><a href=# title id=totop><svg width="48" height="48" fill="currentColor" stroke="currentColor" viewBox="0 96 960 960"><path d="M283 704.739 234.261 656 480 410.261 725.739 656 677 704.739l-197-197-197 197z"/></svg>
</a><script src=/js/main.min.35f435a5d8eac613c52daa28d8af544a4512337d3e95236e4a4978417b8dcb2f.js integrity="sha256-NfQ1pdjqxhPFLaoo2K9USkUSM30+lSNuSkl4QXuNyy8="></script></body></html>